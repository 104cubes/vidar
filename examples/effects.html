<!DOCTYPE html>
<html>
<head>
  <title>Effects in Movie.js</title>
</head>
<body>
  <script src="../dist/movie.js"></script>
  <script>
    let movie;
    window.addEventListener("load", () => {
      const canvas = document.createElement("canvas");
      canvas.width = 600;
      canvas.height = 400;
      document.body.appendChild(canvas);

      initMovie(canvas);
    });

    const initMovie = canvas => {
      movie = new mv.Movie(canvas);

      let image = document.querySelector("img");
      // create a red 400x400 rectangle that starts at time 0 and lasts 2 seconds
      movie
        .addLayer(
          new mv.ImageLayer(0, 2, image)
        )
        // create a transparent blue 500x200 at (50, 20) that starts at time 1 and lasts 2 seconds
        .addLayer(
          new mv.ImageLayer(2, 2, image).addEffect(
            new mv.effects.GuassianBlur(3)
          )
        )
        .addLayer(
          new mv.ImageLayer(4, 2, image).addEffect(
            new mv.effects.Channels({ r: 2, g: 0.5 })
          )
        )
        .addLayer(
          new mv.ImageLayer(6, 2, image, {
            // allow rotated image to fill entire screen by setting the size of the layer, which is not the image
            width: movie.width, height: movie.height
          }).addEffect(
            new mv.effects.Transform(new mv.effects.Transform.Matrix().rotate(Math.PI / 6)) // 30d
          )
        )
        .play();
    }
  </script>
  <img src="media/sample.jpg" style="display: none;"/>
</body>
</html>
